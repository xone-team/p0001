<?xml version="1.0" encoding="UTF-8"?>  <!DOCTYPE mapper   PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"  "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="com.xone.webtools.mybatis.ProductMapper">
<!--     <resultmap id="UserMap" type="User"> -->
<!--         <result column="ID" property="userId"> -->
<!--         <result column="NAME" property="userName"> -->
<!--     </resultmap> -->
	<select id="findProductListWithUser" parameterType="java.util.Map" resultType="java.util.Map">
        select p.*
        from t_product p left join t_user u on p.user_created = u.id 
        <where>
            <if test="id != null">
				and p.id = #{id}
			</if>
            <if test="gtDateCreated != null">
				<![CDATA[and p.date_created > #{gtDateCreated}]]>
			</if>
            <if test="ltDateCreated != null">
                <![CDATA[and p.date_created < #{ltDateCreated}]]>
			</if>
            <if test="saleType != null">
				and p.sale_type = #{saleType}
			</if>
            <if test="productName != null">
				and p.product_name like '%'||#{productName}||'%'
			</if>
            <if test="productType != null">
				and p.product_type like '%' || #{productType} || '%'
			</if>
            <if test="productAddress != null">
				and p.product_address like '%' || #{productAddress} || '%'
			</if>
            <if test="checkStatus != null">
				and p.check_status = #{checkStatus}
			</if>
            <if test="flagDeleted != null">
				and p.flag_deleted = #{flagDeleted}
			</if>
            <if test="userCreated != null">
				and p.user_created = #{userCreated}
			</if>
        </where>
       	order by p.date_created
       	<include refid="limit"/>
	</select>
	<sql id="limit">
       	<if test="offsetIndex != null and maxResult != null">
       	    limit ${offsetIndex} , ${maxResult}
       	</if>
	</sql>
</mapper>